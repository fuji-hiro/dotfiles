#! /usr/bin/env ruby
# frozen_string_literal: true

require 'webrick'
dir = ARGV[0] || './'
port = (ARGV[1] || 8080).to_i
WEBrick::HTTPServer.new(
  DocumentRoot: dir,
  Port: port,
  DirectoryIndex: %w[index.html],
  MimeTypes: WEBrick::HTTPUtils::DefaultMimeTypes.merge(
    # For DirectoryIndex
    # '' => 'text/html',
    'adoc' => 'text/asciidoc; charset=utf8',
    'md' => 'text/markdown; charset=utf8',
    'pu' => 'text/plantuml; charset=utf8',
  ),
).start
